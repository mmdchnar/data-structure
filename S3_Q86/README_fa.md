# ساختار داده سفارشی در پایتون

## مقدمه

این کد پایتون یک ساختار داده سفارشی فراهم می‌کند که به شما امکان ذخیره و بازیابی عناصر با اندیس‌های 1 تا n را با پیچیدگی زمانی O(1) می‌دهد. همچنین، این ساختار داده از پویایی در مقابل تغییرات اندیس‌ها پشتیبانی می‌کند.

## توضیحات کد

```python
class CustomDataStructure:
    def __init__(self):
        self.data = []

    def set(self, x, y):
        if x < 0:
            raise ValueError("Index cannot be negative.")
        elif x < len(self.data):
            self.data[x] = y
        else:
            self._resize_and_set(x, y)

    def _resize_and_set(self, i, y):
        new_data = [None] * (i - len(self.data) + 1)
        self.data += new_data
        self.data[i] = y

    def get(self, x):
        if 0 <= x < len(self.data):
            return self.data[x]
        else:
            raise IndexError("Index out of range.")
```

### گام‌های الگوریتم:

1. **متد `__init__`:** یک لیست خالی برای ذخیره داده‌ها ایجاد می‌کند.

2. **متد `set(self, x, y)`:** عنصر با مقدار `y` را در اندیس `x` تعیین شده، در صورت وجود، به‌روزرسانی می‌کند. در غیر این صورت با افزودن اجزای جدید، مقدار `y` در اندیس `x` تعیین شده ذخیره می‌شود.

3. **متد `_resize_and_set(self, i, y)`:** در صورت نیاز به تغییر اندیس‌ها، یک لیست جدید ایجاد کرده و اجزای فعلی به آن اضافه کرده، سپس مقدار `y` را در اندیس مشخص شده تعیین می‌کند.

4. **متد `get(self, x)`:** مقدار موجود در اندیس `x` مشخص شده را بازیابی می‌کند. در صورت عدم وجود، یک خطای `IndexError` ایجاد می‌شود.

### پیچیدگی‌های زمانی:

- **`set` و `_resize_and_set`:** O(1) - پیچیدگی زمانی ثابت برای افزودن یا به‌روزرسانی اجزاء.

- **`get`:** O(1) - پیچیدگی زمانی ثابت برای بازیابی مقدار از یک اندیس خاص.

## استفاده

برای استفاده از این ساختار داده، می‌توانید این متدها را به‌صورت زیر فراخوانی کنید:

```python
custom_ds = CustomDataStructure()

# تعیین مقدار در اندیس 3
custom_ds.set(3, 5)

# بازیابی مقدار از اندیس 3
value = custom_ds.get(3)
print(value)  # خروجی: "5"
```

## نتیجه‌گیری

ساختار داده سفارشی ارائه شده در این کد، یک راه حل ساده و با پیچیدگی زمانی کم برای ذخیره و بازیابی عناصر با اندیس‌های متغیر فراهم می‌کند. این مناسب برای سناریوهایی است که نیاز به افزودن یا به‌روزرسانی سریع عناصر با اندیس‌های متغیر دارید.
